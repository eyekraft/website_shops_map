<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ShopsMap Frontend Assets -->
    <template id="shops_map_assets" inherit_id="website.assets_frontend">
        <xpath expr="." position="inside">
            <script type="text/javascript" src="/website_shops_map/static/lib/backbone/backbone.js"></script>
            <script type="text/javascript" src="/website_shops_map/static/lib/jquery.autocomplete.js"></script>
            <script type="text/javascript" src="/website_shops_map/static/lib/jquery.cookie.js"></script>
            <script type="text/javascript" src="/website_shops_map/static/lib/bootstrap-select/bootstrap-select.js"></script>
            <script type="text/javascript" src="/website_shops_map/static/src/js/shop_list_snippet.js" async="async"></script>
            <link type="text/css" rel="stylesheet" href="/website_shops_map/static/lib/bootstrap-select/bootstrap-select.min.css" />
            <link type="text/css" rel="stylesheet" href="/website_shops_map/static/src/css/reflex.css" />
            <link type="text/css" rel="stylesheet" href="/website_shops_map/static/src/css/shop_list_style.css" />
        </xpath>
    </template>

    <!-- Yandex Map API Link Assets -->
    <template id="assets_yandex" name="Yandex Maps Assets">
        <t t-set="yandex_maps_api_key" t-value="request.env['ir.config_parameter'].sudo().get_param('web_yandex_maps.api_key')"/>
        <t t-set="yandex_maps_lang_localization" t-value="request.env['ir.config_parameter'].sudo().get_param('web_yandex_maps.lang_localization')"/>
        <t t-set="yandex_maps_modules" t-value="request.env['ir.config_parameter'].sudo().get_param('web_yandex_maps.modules')"/>
        <t t-if="yandex_maps_api_key">
            <script t-attf-src="https://api-maps.yandex.ru/2.1.79/?apikey=#{yandex_maps_api_key}&amp;libraries=#{yandex_maps_modules}#{yandex_maps_lang_localization and '&amp;lang=' + yandex_maps_lang_localization or ''}"></script>
        </t>
        <t t-else="">
            <script t-attf-src="https://api-maps.yandex.ru/2.1.79/?libraries=#{yandex_maps_modules}#{yandex_maps_lang_localization and '&amp;lang=' + yandex_maps_lang_localization or ''}"></script>
        </t>
    </template>

    <!-- Call to Yandex Map API Link Assets -->
    <template name="Yandex Map API Link" id="yandex_map_api" inherit_id="website.layout">
        <xpath expr="//script[last()]" position="after">
            <t t-call="website_shops_map.assets_yandex"/>
        </xpath>
    </template>

    <!-- Website Editor Assets -->
    <template id="shops_map_assets_editor" inherit_id="website.assets_editor" name="Editor assets">
        <xpath expr="." position="inside">
            <!-- <script type="text/javascript" src="/website_shops_map/static/src/js/website.editor.js"></script> -->
            <script type="text/javascript" src="/website_shops_map/static/src/js/shop_list_editor.js"></script>
        </xpath>
    </template>
</odoo>
